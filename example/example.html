<html>

<body>


<div id="bound">

    <h1>{title}</h1>


    <ul>
        <li kb-each-key="items | keys">
            <b>{key}</b>: {items | member key | member 'Fruit'}
        </li>
    </ul>

    <ul>
        <li kb-each-item="array">
            <b>{item}</b>
        </li>
    </ul>


    <button type="button" kb-on-click="update">Update Model</button>


    <div>
        Green: <input type="text" kb-value="items.Green.Fruit">
        Red: <input type="text" kb-value="items.Red.Fruit">
        Yellow: <input type="text" kb-value="items.Yellow.Fruit">
    </div>


    {items.Green.Fruit}

    {"hello" | hash}


    <div style="margin-top:30px">

        <div style="display: grid; grid-template-columns: 100px 50px">

            <div >
                <label style="display:block;">
                    All values
                    <input type="radio" name="blogcategory" value="" kb-checked="blogFilters.category.value" />
                </label>
                <label kb-each-category="blog | memberValues 'category' | mergeValues | distinct" style="display:block;">
                    {category}
                    <input type="radio" name="blogcategory" kb-value="category" kb-checked="blogFilters.category.value" />
                </label>
            </div>

            <div>
                <input type="text" placeholder="Search blogs" kb-value="blogFilters.titleSearch.value"/>
                <input type="date" placeholder="yyyy-mm-dd" kb-value="blogFilters.fromDate.value" />
                <input type="date" placeholder="yyyy-mm-dd" kb-value="blogFilters.toDate.value" />

                <table>
                    <thead>
                    <tr>
                        <th>Title</th>
                        <th>Category</th>
                        <th>Date</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr kb-each-blog="blog | filter blogFilters | sort 'title' 'asc' | slice 0 3">
                        <td>{blog.title}</td>
                        <td>{blog.category | join}</td>
                        <td>{blog.date}</td>
                    </tr>
                    </tbody>
                </table>

            </div>

        </div>

    </div>

</div>


<script type="text/javascript" src="../dist/kinibind.js"></script>


<script type="text/javascript">

    let bind = new Kinibind(document.getElementById("bound"), {
        "title": "Welcome to the colour machine",
        "items": {
            "Green": {
                "Fruit": "Apple"
            },
            "Red": {
                "Fruit": "Strawberry"
            },
            "Yellow": {
                "Fruit": "Banana"
            }
        },
        "blog": [
            {
                "title": "Hello world",
                "category": ["Maths", "English"],
                "date": "2012-01-01"
            }, {
                "title": "Goodbye Sun",
                "category": ["Science", "English"],
                "date": "2014-01-01"
            }, {
                "title": "Calculus",
                "category": ["Maths"],
                "date": "2011-01-01"
            }, {
                "title": "Finkle",
                "category": ["English", "Science"],
                "date": "2013-01-01"
            }, {
                "title": "Hello moon",
                "category": ["Science"],
                "date": "2012-01-01"
            }

        ],
        "blogFilters": {
            "titleSearch": {
                "member": "title",
                "type": "like"
            },
            "category": {},
            "fromDate": {
                "member": "date",
                "type": "gte"
            },
            "toDate": {
                "member": "date",
                "type": "lte"
            }
        },
        "array": [
            "Purple",
            "Pink",
            "Lilac"
        ],
        "update": () => {
            bind.model.items.Green.Fruit = "Lime";
            bind.addNewProperty(bind.model.items, "Orange", {Fruit: "Orange"});
            bind.model.array.push("Indigo");
        }
    });


</script>

</body>

</html>
