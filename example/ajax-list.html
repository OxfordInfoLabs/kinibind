<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kinibind - Ajax List</title>

    <style>
        .label {
            background-color: lightgray;
            padding: 5px;
            border-radius: 4px
        }

        li {
            margin: 20px 0
        }
    </style>

</head>
<body id="my-element">

<h1>AJAX list</h1>

<div kb-bind source="https://jsonplaceholder.typicode.com/users" model="users" reload-trigger="try-again:click"
     loading-indicator="loading-users">
    <ul>
        <li kb-each-user="users">
            <span class="label">User ID: {user.id}</span>&nbsp;<b>Name: </b>{user.name}
        </li>
    </ul>

    <p class="loading-users">Loading Users, Please Wait....</p>

    <h4 class="error" kb-show="usersError">There was a problem loading the users. Please try again.</h4>

    <button class="try-again" kb-show="usersError">Reload Users</button>
</div>


<hr>

<h1>Model properties</h1>

<p>
    <strong>Numbers</strong> <span kb-each-number="numbers">{number} </span>
</p>

<hr>

<button kb-action source="https://jsonplaceholder.typicode.com/users/1" model="actionUser"
        loading-indicator="loading-action">
    Show Favourite
</button>

<p>My favourite user is: {actionUser.name}</p>

<p class="loading-action" style="display: none">Loading Action User, Please Wait....</p>

<p kb-show="actionUser.name | eval '===' actionUser.name">{actionUser.name} is my favourite user</p>

<p kb-html="100 | eval '*' 2.5"></p>

<p kb-html="450 | eval '+' 850"></p>

<p kb-html="actionUser.id | eval '/' 450"></p>

<h4 class="error" kb-show="actionUserError">There was a problem loading the user.</h4>

<hr>

<h4>Domains</h4>

<input type="text" kb-value="searchString" class="search-input">
<button class="search-button">Search</button>

<div kb-bind source="http://trade.netistrar.test/domains/hinted?searchString={searchString}&category={categories}"
     model="domains" method="GET" class="main-list-load"
     reload-trigger="search-button:click,selected-tlds:change,search-input:enter" load="false"
     loading-indicator="loading-domains">

    <h5 class="loading-domains">Loading domains ...</h5>

    <h4>Featured Results</h4>

    <ul>
        <li kb-each-featured="domains.tldResults">
            {featured.domainName}
            <span style="color: green" kb-show="featured.availability | eval '==' 'HINTED_AVAILABLE'">Available</span>
            <span style="color: lightgray"
                  kb-hide="featured.availability | eval '==' 'HINTED_AVAILABLE'">Unavailable</span>
        </li>
    </ul>

    <hr>


    <div style="display: flex">
        <div style="width: 25%">
            <div class="selected-tlds" kb-multi-check model="categories">
                <h5>Categories</h5>

                <input type="checkbox" value="Suggested" checked="checked"> Suggested


            </div>
            <div>
                <h5>TLDs</h5>
                <div kb-multi-check output="object" on-event="main-list-load:sourceLoaded" model="selectedTlds">
                    <div kb-each-tldresult="domains.tldResults" index-property="tld">
                        <input type="checkbox" kb-mcvalue="tld">{tld}
                    </div>
                </div>
            </div>
        </div>

        <div>
            <h5>Results</h5>

            <div kb-each-tldsuggestions="domains.tldSuggestions" index-property="suggestiontld">
                <ul class="show-selected" kb-show="selectedTlds[{suggestiontld}]">
                    <li kb-each-domainsuggestion="tldsuggestions">
                        {domainsuggestion.domainName}
                        <!--<span style="color: green" kb-show="suggested.availability | eval '==' 'HINTED_AVAILABLE'">Available</span>-->
                        <!--<span style="color: lightgray" kb-hide="suggested.availability | eval '==' 'HINTED_AVAILABLE'">Unavailable</span>-->
                        <!--{suggested.prices.registration.0.standardBuyPrice}-->
                    </li>
                </ul>
            </div>


            <ul kb-hide="selectedTlds.all">
                <li kb-each-suggestion="domains.suggestions">
                    {suggestion.domainName}
                    <span style="color: green" kb-show="suggestion.availability | eval '==' 'HINTED_AVAILABLE'">Available</span>
                    <span style="color: lightgray" kb-hide="suggestion.availability | eval '==' 'HINTED_AVAILABLE'">Unavailable</span>
                    {suggestion.prices.registration.0.standardBuyPrice}
                </li>
            </ul>

        </div>


    </div>


    <hr>


    <div style="display: flex">
        <div style="width: 25%">
            <div kb-multi-check model="filters">
                <h5>Filters</h5>

                <input type="checkbox" value="Suggested"> Suggested
                <br>
                <input type="checkbox" value="Popular"> Popular
                <br>
                <input type="checkbox" value="Magic"> Magic
            </div>
        </div>

        <div>
            <h5>Results</h5>


            <b>Selected Filters: </b><span kb-each-filter="filters"> {filter} </span>

            <p kb-if="filters | eval 'CONTAINS_EMPTY' 'Suggested,Magic'">
                I am an article with Suggested or Magic filters.
            </p>


            <p kb-if="filters | eval 'CONTAINS_EMPTY' 'Suggested,Popular'">
                I am an article with Suggested or Popular filters.
            </p>

            <p kb-if="filters | eval 'CONTAINS_EMPTY' 'Popular,Magic'">
                I am an article with Popular or Magic filters.
            </p>

            <p kb-if="filters | eval 'CONTAINS_EMPTY' 'Magic'">
                I am an article with Magic filters.
            </p>

        </div>


    </div>
</div>


<script src="../dist/kinibind.js"></script>

<script>
    kinibind.bind(document.getElementById('my-element'), {numbers: [1, 2, 3, 4, 5, 6, 7]});
</script>

</body>
</html>
